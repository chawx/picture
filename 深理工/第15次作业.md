# 第15次作业

- 使用访问指针的方式重写所有使用数组的地方。
- 使用访问数组的方式重写所有使用指针的地方。
- 在其它程序中使用指针来代替数组访问。
- 使用指针来处理命令行参数，就像处理`names`那样。
- 将获取值和获取地址组合到一起。
- 在程序末尾添加一个`for`循环，打印出这些指针所指向的地址。你需要在`printf`中使用`%p`。
- 对于每一种打印数组的方法，使用函数来重写程序。试着向函数传递指针来处理数据。记住你可以声明接受指针的函数，但是可以像数组那样用它。
- 将`for`循环改为`while`循环，并且观察对于每种指针用法哪种循环更方便。

```c
#include <stdio.h>

void print_with_pointers(int *ages, char **names, int count) {
    // Using pointers to access the arrays
    for (int i = 0; i < count; i++) {
        printf("%s has %d years alive.\n",
               *(names + i), *(ages + i));
    }
}

void print_with_arrays(int ages[], char *names[], int count) {
    // Using arrays to access the arrays
    for (int i = 0; i < count; i++) {
        printf("%s is %d years old.\n",
               names[i], ages[i]);
    }
}

int main(int argc, char *argv[]) {
    // Create two arrays we care about
    int ages[] = {23, 43, 12, 89, 2};
    char *names[] = {
        "Alan", "Frank",
        "Mary", "John", "Lisa"
    };

    // Safely get the size of ages
    int count = sizeof(ages) / sizeof(int);
    int i = 0;

    printf("--- Using Pointers ---\n");
    print_with_pointers(ages, names, count);

    printf("--- Using Arrays ---\n");
    print_with_arrays(ages, names, count);

    // Using pointers to handle command line arguments
    char **cur_arg = argv;

    printf("--- Command Line Arguments ---\n");
    while (*cur_arg) {
        printf("%s\n", *cur_arg);
        cur_arg++;
    }

    // Combine getting values and getting addresses
    int some_value = 42;
    int *value_pointer = &some_value;

    printf("--- Getting Value and Address ---\n");
    printf("Value: %d, Address: %p\n", *value_pointer, (void *)value_pointer);

    // Print addresses of the arrays
    printf("--- Addresses of Arrays ---\n");
    for (int i = 0; i < count; i++) {
        printf("Address of names[%d]: %p\n", i, (void *)&names[i]);
        printf("Address of ages[%d]: %p\n", i, (void *)&ages[i]);
    }

    // Rewrite the loops with while loops
    printf("--- Using Pointers with While Loop ---\n");
    int *cur_age = ages;
    char **cur_name = names;

    while ((cur_age - ages) < count) {
        printf("%s is %d years old.\n",
               *cur_name, *cur_age);
        cur_name++;
        cur_age++;
    }

    printf("--- Using Arrays with While Loop ---\n");
    i = 0;
    while (i < count) {
        printf("%s is %d years old.\n",
               names[i], ages[i]);
        i++;
    }

    return 0;
}

```



![](https://raw.githubusercontent.com/chawx/picture/main/imageSnipaste_2023-12-01_11-50-33.png)